{% extends 'back.html.twig' %}

{% block content %}
    <div class="container mt-4">
        <h1>Modifier la Question</h1>

        {{ form_start(form, {'attr': {'id': 'question-form', 'novalidate': 'novalidate', 'class': 'needs-validation'}}) }}
            <div class="form-group">
                {{ form_label(form.titre) }}
                {{ form_widget(form.titre, {
                    'attr': {
                        'class': 'form-control',
                        'required': 'required',
                        'minlength': '5',
                        'maxlength': '255',
                        'pattern': '^[A-Za-z0-9\\s\\-]+$'
                    }
                }) }}
                <div class="invalid-feedback">
                    Le titre est obligatoire, doit contenir entre 5 et 255 caractères et ne peut contenir que des lettres, chiffres et tirets.
                </div>
            </div>

            <div class="form-group mt-3">
                {{ form_label(form.contenu) }}
                {{ form_widget(form.contenu, {
                    'attr': {
                        'class': 'form-control',
                        'required': 'required',
                        'minlength': '10'
                    }
                }) }}
                <div class="invalid-feedback">
                    Le contenu est obligatoire et doit contenir au moins 10 caractères.
                </div>
            </div>

            <div class="form-group mt-3">
                {{ form_label(form.specialite) }}
                {{ form_widget(form.specialite, {
                    'attr': {
                        'class': 'form-control',
                        'required': 'required'
                    }
                }) }}
                <div class="invalid-feedback">
                    Veuillez sélectionner une spécialité.
                </div>
            </div>

            <div class="form-group mt-3">
                <div class="d-flex align-items-center" style="margin-left:30px">
                    {{ form_label(form.visible, null, {'label_attr': {'class': 'mr-3', 'style': 'margin-top: 10px;'}}) }}
                    {{ form_widget(form.visible) }}
                </div>
            </div>

            <div class="form-group mt-3">
                {{ form_label(form.image) }}
                {{ form_widget(form.image, {
                    'attr': {
                        'class': 'form-control',
                        'required': 'required'
                    }
                }) }}
                <div class="invalid-feedback">
                    Veuillez ajouter une image.
                </div>
            </div>

            <div class="mt-4">
                <button type="submit" class="btn btn-primary">Valider</button>
            </div>
        {{ form_end(form) }}
    </div>

    <script>
        (function () {
            'use strict';
            var form = document.getElementById('question-form');

            form.addEventListener('submit', function (event) {
                if (!form.checkValidity()) {
                    event.preventDefault();
                    event.stopPropagation();
                }
                form.classList.add('was-validated');
            }, false);
        })();
    </script>
{% endblock %}