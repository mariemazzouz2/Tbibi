{% extends 'base.html.twig' %}

{% block title %}{{ question.titre }}{% endblock %}

{% block body %}
    <div class="container mt-4">
        <h1>{{ question.titre }}</h1>
        <p>{{ question.contenu }}</p>

        <h3>R√©ponses :</h3>
        <ul class="list-group">
            {% for reponse in reponses %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                        {{ reponse.contenu }}  
                    </div>
                    <div>
                        <!-- Boutons de vote -->
                        <a href="{{ path('vote', {id: reponse.id, type: 'like'}) }}" class="btn btn-success btn-sm">
                            üëç {{ reponse.votes|filter(v => v.valeur.value == 'like')|length }}
                        </a>
                        <a href="{{ path('vote', {id: reponse.id, type: 'dislike'}) }}" class="btn btn-danger btn-sm">
                            üëé {{ reponse.votes|filter(v => v.valeur.value == 'dislike')|length }}
                        </a>
                    </div>
                </li>
            {% else %}
                <p>Aucune r√©ponse pour le moment.</p>
            {% endfor %}
        </ul>

        <h3 class="mt-4">Ajouter une r√©ponse :</h3>
        {{ form_start(form) }}
            <div class="form-group">
                {{ form_label(form.contenu, 'Votre r√©ponse') }}
                {{ form_widget(form.contenu, { 'attr': {'class': 'form-control', 'rows': 4} }) }}
            </div>
            <button type="submit" class="btn btn-primary mt-2">R√©pondre</button>
        {{ form_end(form) }}
    </div>
{% endblock %}
